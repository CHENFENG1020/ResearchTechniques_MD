<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, user-scalable=yes" name="viewport">
    <title>Intro2BASH_S7</title>


    <style type="text/css">
        body {
            font-family: Helvetica, arial, sans-serif;
            font-size: 14px;
            line-height: 1.6;
            padding-top: 10px;
            padding-bottom: 10px;
            background-color: white;
            padding: 30px;
        }

        body > *:first-child {
            margin-top: 0 !important;
        }

        body > *:last-child {
            margin-bottom: 0 !important;
        }

        a {
            color: #4183C4;
        }

        a.absent {
            color: #cc0000;
        }

        a.anchor {
            display: block;
            padding-left: 30px;
            margin-left: -30px;
            cursor: pointer;
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
        }

        h1, h2, h3, h4, h5, h6 {
            margin: 20px 0 10px;
            padding: 0;
            font-weight: bold;
            -webkit-font-smoothing: antialiased;
            cursor: text;
            position: relative;
        }

        h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
            background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
            text-decoration: none;
        }

        h1 tt, h1 code {
            font-size: inherit;
        }

        h2 tt, h2 code {
            font-size: inherit;
        }

        h3 tt, h3 code {
            font-size: inherit;
        }

        h4 tt, h4 code {
            font-size: inherit;
        }

        h5 tt, h5 code {
            font-size: inherit;
        }

        h6 tt, h6 code {
            font-size: inherit;
        }

        h1 {
            font-size: 28px;
            color: black;
        }

        h2 {
            font-size: 24px;
            border-bottom: 1px solid #cccccc;
            color: black;
        }

        h3 {
            font-size: 18px;
        }

        h4 {
            font-size: 16px;
        }

        h5 {
            font-size: 14px;
        }

        h6 {
            color: #777777;
            font-size: 14px;
        }

        p, blockquote, ul, ol, dl, li, table, pre {
            margin: 15px 0;
        }

        hr {
            background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
            border: 0 none;
            color: #cccccc;
            height: 4px;
            padding: 0;
        }

        body > h2:first-child {
            margin-top: 0;
            padding-top: 0;
        }

        body > h1:first-child {
            margin-top: 0;
            padding-top: 0;
        }

        body > h1:first-child + h2 {
            margin-top: 0;
            padding-top: 0;
        }

        body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
            margin-top: 0;
            padding-top: 0;
        }

        a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
            margin-top: 0;
            padding-top: 0;
        }

        h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
            margin-top: 0;
        }

        li p.first {
            display: inline-block;
        }

        li {
            margin: 0;
        }

        ul, ol {
            padding-left: 30px;
        }

        ul :first-child, ol :first-child {
            margin-top: 0;
        }

        dl {
            padding: 0;
        }

        dl dt {
            font-size: 14px;
            font-weight: bold;
            font-style: italic;
            padding: 0;
            margin: 15px 0 5px;
        }

        dl dt:first-child {
            padding: 0;
        }

        dl dt > :first-child {
            margin-top: 0;
        }

        dl dt > :last-child {
            margin-bottom: 0;
        }

        dl dd {
            margin: 0 0 15px;
            padding: 0 15px;
        }

        dl dd > :first-child {
            margin-top: 0;
        }

        dl dd > :last-child {
            margin-bottom: 0;
        }

        blockquote {
            border-left: 4px solid #dddddd;
            padding: 0 15px;
            color: #777777;
        }

        blockquote > :first-child {
            margin-top: 0;
        }

        blockquote > :last-child {
            margin-bottom: 0;
        }

        table {
            padding: 0;
            border-collapse: collapse;
        }

        table tr {
            border-top: 1px solid #cccccc;
            background-color: white;
            margin: 0;
            padding: 0;
        }

        table tr:nth-child(2n) {
            background-color: #f8f8f8;
        }

        table tr th {
            font-weight: bold;
            border: 1px solid #cccccc;
            margin: 0;
            padding: 6px 13px;
        }

        table tr td {
            border: 1px solid #cccccc;
            margin: 0;
            padding: 6px 13px;
        }

        table tr th :first-child, table tr td :first-child {
            margin-top: 0;
        }

        table tr th :last-child, table tr td :last-child {
            margin-bottom: 0;
        }

        img {
            max-width: 100%;
        }

        span.frame {
            display: block;
            overflow: hidden;
        }

        span.frame > span {
            border: 1px solid #dddddd;
            display: block;
            float: left;
            overflow: hidden;
            margin: 13px 0 0;
            padding: 7px;
            width: auto;
        }

        span.frame span img {
            display: block;
            float: left;
        }

        span.frame span span {
            clear: both;
            color: #333333;
            display: block;
            padding: 5px 0 0;
        }

        span.align-center {
            display: block;
            overflow: hidden;
            clear: both;
        }

        span.align-center > span {
            display: block;
            overflow: hidden;
            margin: 13px auto 0;
            text-align: center;
        }

        span.align-center span img {
            margin: 0 auto;
            text-align: center;
        }

        span.align-right {
            display: block;
            overflow: hidden;
            clear: both;
        }

        span.align-right > span {
            display: block;
            overflow: hidden;
            margin: 13px 0 0;
            text-align: right;
        }

        span.align-right span img {
            margin: 0;
            text-align: right;
        }

        span.float-left {
            display: block;
            margin-right: 13px;
            overflow: hidden;
            float: left;
        }

        span.float-left span {
            margin: 13px 0 0;
        }

        span.float-right {
            display: block;
            margin-left: 13px;
            overflow: hidden;
            float: right;
        }

        span.float-right > span {
            display: block;
            overflow: hidden;
            margin: 13px auto 0;
            text-align: right;
        }

        code, tt {
            margin: 0 2px;
            padding: 0 5px;
            white-space: nowrap;
            border: 1px solid #eaeaea;
            background-color: #f8f8f8;
            border-radius: 3px;
        }

        pre code {
            margin: 0;
            padding: 0;
            white-space: pre;
            border: none;
            background: transparent;
        }

        .highlight pre {
            background-color: #f8f8f8;
            border: 1px solid #cccccc;
            font-size: 13px;
            line-height: 19px;
            overflow: auto;
            padding: 6px 10px;
            border-radius: 3px;
        }

        pre {
            background-color: #f8f8f8;
            border: 1px solid #cccccc;
            font-size: 13px;
            line-height: 19px;
            overflow: auto;
            padding: 6px 10px;
            border-radius: 3px;
        }

        pre code, pre tt {
            background-color: transparent;
            border: none;
        }

        sup {
            font-size: 0.83em;
            vertical-align: super;
            line-height: 0;
        }

        kbd {
            display: inline-block;
            padding: 3px 5px;
            font-size: 11px;
            line-height: 10px;
            color: #555;
            vertical-align: middle;
            background-color: #fcfcfc;
            border: solid 1px #ccc;
            border-bottom-color: #bbb;
            border-radius: 3px;
            box-shadow: inset 0 -1px 0 #bbb
        }

        * {
            -webkit-print-color-adjust: exact;
        }

        @media screen and (min-width: 914px) {
            body {
                width: 854px;
                margin: 0 auto;
            }
        }

        @media print {
            table, pre {
                page-break-inside: avoid;
            }

            pre {
                word-wrap: break-word;
            }

            body {
                padding: 2cm;
            }
        }
    </style>

    <style type="text/css">
        /**
         * prism.js default theme for JavaScript, CSS and HTML
         * Based on dabblet (http://dabblet.com)
         * @author Lea Verou
         */

        code[class*="language-"],
        pre[class*="language-"] {
            color: black;
            background: none;
            text-shadow: 0 1px white;
            font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
            text-align: left;
            white-space: pre;
            word-spacing: normal;
            word-break: normal;
            word-wrap: normal;
            line-height: 1.5;

            -moz-tab-size: 4;
            -o-tab-size: 4;
            tab-size: 4;

            -webkit-hyphens: none;
            -moz-hyphens: none;
            -ms-hyphens: none;
            hyphens: none;
        }

        pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
        code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
            text-shadow: none;
            background: #b3d4fc;
        }

        pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
        code[class*="language-"]::selection, code[class*="language-"] ::selection {
            text-shadow: none;
            background: #b3d4fc;
        }

        @media print {
            code[class*="language-"],
            pre[class*="language-"] {
                text-shadow: none;
            }
        }

        /* Code blocks */
        pre[class*="language-"] {
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
        }

        :not(pre) > code[class*="language-"],
        pre[class*="language-"] {
            background: #f5f2f0;
        }

        /* Inline code */
        :not(pre) > code[class*="language-"] {
            padding: .1em;
            border-radius: .3em;
            white-space: normal;
        }

        .token.comment,
        .token.prolog,
        .token.doctype,
        .token.cdata {
            color: slategray;
        }

        .token.punctuation {
            color: #999;
        }

        .namespace {
            opacity: .7;
        }

        .token.property,
        .token.tag,
        .token.boolean,
        .token.number,
        .token.constant,
        .token.symbol,
        .token.deleted {
            color: #905;
        }

        .token.selector,
        .token.attr-name,
        .token.string,
        .token.char,
        .token.builtin,
        .token.inserted {
            color: #690;
        }

        .token.operator,
        .token.entity,
        .token.url,
        .language-css .token.string,
        .style .token.string {
            color: #a67f59;
            background: hsla(0, 0%, 100%, .5);
        }

        .token.atrule,
        .token.attr-value,
        .token.keyword {
            color: #07a;
        }

        .token.function {
            color: #DD4A68;
        }

        .token.regex,
        .token.important,
        .token.variable {
            color: #e90;
        }

        .token.important,
        .token.bold {
            font-weight: bold;
        }

        .token.italic {
            font-style: italic;
        }

        .token.entity {
            cursor: help;
        }
    </style>


</head>

<body>

<h1 id="toc_0">PART 7 &ndash; Using high performance computers</h1>

<p>👆<a href="Session1.html">Go to the main menu</a> <br>
    👈<a href="Intro2BASH_S6.html">Go to the previous part &ndash; Pipes and Filters</a><br></p>

<p>We have seen above how using a command-line interface instead of a GUI and creating scripts can save us valuable time
    running the analysis. Still, depending on the job we need to do, the time-limiting step can be the performance of
    our laptop/desktop. In this case, we need access to a more powerful machine. There are numerous large computers with
    shared computing resources available: from smaller machines in research groups, to the University ones, to national
    facilities. </p>

<p>These resources on these machines typically have larger numbers and sizes of central processing units (CPUs), CPUs
    that operate at higher speeds, more memory, more storage, and faster connections with other computer systems. They
    are frequently called “clusters”, “supercomputers” or resources for “high-performance computing” or HPC. </p>

<p>Using a cluster often has the following advantages for researchers:</p>

<ul>
    <li><strong>Speed</strong>. With many more CPU cores, often with higher performance specs, than a typical laptop or
        desktop, HPC systems can offer significant speed up.
    </li>
    <li><strong>Volume</strong>. Many HPC systems have both the processing memory (RAM) and disk storage to handle very
        large amounts of data. Terabytes of RAM and petabytes of storage are available for research projects.
    </li>
    <li><strong>Efficiency</strong>. Many HPC systems operate a pool of resources that are drawn on by many users. In
        most cases, when the pool is large and diverse enough, the resources on the system are used almost constantly.
        This also means that the user can run jobs in parallel and a number of jobs simultaniously.
    </li>
    <li><strong>Cost</strong>. Bulk purchasing and government funding mean that the cost to the research community for
        using these systems in significantly less that it would be otherwise.
    </li>
    <li><strong>Convenience</strong>. Maybe your calculations just take a long time to run or are otherwise inconvenient
        to run on your personal computer. There’s no need to tie up your own computer for hours when you can use someone
        else’s instead;)
    </li>
</ul>

<p>The University of Edinburgh has a supercomputer <a
        href="https://www.ed.ac.uk/information-services/research-support/research-computing/ecdf/high-performance-computing">Eddie</a>,
    which we will be using during this practical. Furthermore, UoE is a host to national supercomputing facilities <a
            href="https://www.archer2.ac.uk">ARCHER2</a> and <a href="https://www.cirrus.ac.uk">Cirrus</a>, available to
    researchers in the UK.</p>

<p>In this part of the session we will apply the bash skills we have learned earlier to connect and use Eddie HPC. In
    the following sessions, we will be using Eddie HPC to run our calculations.</p>

<h3 id="toc_1">1. Connecting to a remote machine</h3>

<p>Connecting to an HPC system is most often done through a tool known as SSH, for <strong>s</strong>ecure
    <strong>sh</strong>ell, and usually SSH is run through a terminal. So, to begin using an HPC system, we need to open
    a terminal. </p>

<p style="font-weight: bold">Open a new terminal for this step. You will then have two terminals to work on in parallel
    - one for working on local machine, one for working on Eddie.</p>

<p>Into the terminal type without brackets:</p>

<div>
    <pre><code class="language-bash">$ ssh &lt;UUN&gt;@eddie.ecdf.ed.ac.uk</code></pre>
</div>

<p>where <code>&lt;UUN&gt;</code> should be replaced with your university credentials, typically starting with
    <code>s</code>, for example:</p>

<div>
    <pre><code class="language-none">$ ssh s1234567@eddie.ecdf.ed.ac.uk</code></pre>
</div>

<p>The terminal will prompt you for the password, which is your university password. Note, that there will be no
    spaces/stars/symbols filling up when you are typing the password in, the display will not change. When you are done,
    hit &lsquo;Enter&rsquo;.</p>

<p>Note, if logging in for the first time, your computer may ask to remember the remote machine, reply &lsquo;yes&rsquo;.</p>

<p>When successfully logged in, you will see:</p>

<div><pre><code class="language-none">         _______    _     _ _       
        (_______)  | |   | (_)      
         _____   _ | | _ | |_  ____ 
        |  ___) / || |/ || | |/ _  )
        | |____( (_| ( (_| | ( (/ / 
        |_______)____|\____|_|\____)

    WELCOME TO Eddie

        www.ecdf.ed.ac.uk
_____________________________________________________________________

A guide to getting started is available here:
https://www.wiki.ed.ac.uk/display/ResearchServices/Quickstart

Service documentation is here:
https://www.wiki.ed.ac.uk/display/ResearchServices/Eddie

Please report any issues to IS.Helpline@ed.ac.uk
_____________________________________________________________________</code></pre>
</div>

<h3 id="toc_2">2. Telling the difference between local and remote terminal</h3>

<p>You may have also noticed that the prompt changed when you logged into the remote system from <code>$</code> to a
    more complete <code>[nelle@login03(eddie) ~]$</code>.</p>

<p>This change is important because it makes it clear on which system the commands you type will be run when you pass
    them into the terminal. Exactly what is reported before the <code>$</code> in the terminal when it is connected to
    the local system and the remote system will typically be different for every user.</p>

<p>Just like on your local machine, you can use the commands <code>cd</code>, <code>ls</code>, <code>pwd</code>, etc. to
    navigate around, as well as all the other commands we have used above. </p>

<h3 id="toc_3">3. File structure</h3>

<p>Unlike your local machine, the file structure of Eddie is different, offering a variety of storage options/locations
    to cater for different types of work. </p>

<p>When you log into the machine, you automatically land at your <strong>home directory</strong>. Check what it is by
    typing:</p>

<div>
    <pre><code class="language-bash">[nelle@login03(eddie) ~]$ pwd</code></pre>
</div>

<p>which will show:</p>

<div>
    <pre><code class="language-none">/home/nelle</code></pre>
</div>

<p>This home directory space is small, default only 10 Gb, and can be used to store cluster conimguration files/ job
    scripts and small amounts of persistent data. It is not suitable for the large files produced by the
    simulations. </p>

<p>Instead, there is a <strong>scratch directory</strong>, a large 2 Tb space, shared by all users of Eddie, where we
    will be running our simulations from. </p>

<blockquote>
    <p><strong><em>WARNING</em></strong> ⚠️ <em>Files older than one month will be deleted from Scratch directory.</em>
        This is enough time for the duration of our course, but if you would like to keep your data, it will have to be
        moved onto your personal Datastore.</p>
</blockquote>

<p>Let&rsquo;s explore that space:</p>

<div>
    <pre><code class="language-bash">[nelle@login03(eddie) ~]$ cd /exports/eddie/scratch/&lt;UUN&gt;</code></pre>
</div>

<p>Replace <code>&lt;UUN&gt;</code> with your username, for Nelle her username is <code>nelle</code>, and therefore,
    this is:</p>

<div>
    <pre><code class="language-bash">[nelle@login03(eddie) ~]$ cd /exports/eddie/scratch/nelle</code></pre>
</div>

<p><em>Have you noticed that the prompt has changed?</em>
    Instead of <code>~</code>, standing for &lsquo;home directory&rsquo;, it is now showing the directory you are
    currently in, i.e. <code>[nelle@login03(eddie) nelle]$</code></p>

<p>In this directory, let&rsquo;s create a folder <code>session1</code> and descend into it:</p>

<div><pre><code class="language-bash">[nelle@login03(eddie) nelle]$ mkdir session1
[nelle@login03(eddie) nelle]$ cd session1
[nelle@login03(eddie) session1]$ pwd
/exports/eddie/scratch/nelle/session1</code></pre>
</div>

<p>Let&rsquo;s remember this location, as it will be the destination for the file transfers.</p>

<h3 id="toc_4">4. Transferring files to the remote machine</h3>

<p>To transfer files across computers, we will use <code>scp</code>, which stands for <strong>s</strong>ecure
    <strong>c</strong>o<strong>p</strong>y. The command works like <code>cp</code> that we use when copying files within
    our own machine, i.e., the command is followed by the file to copy and the location to copy to.</p>

<p>To copy a file from your local machine to your remote machine, there are two options:</p>

<p>1 - When run on your local machine:
    <code>
        $ scp /location/directory/file &lt;YOUR UUN&gt;@eddie.ecdf.ed.ac.uk:/destination/directory/
    </code></p>

<p>2 - When run on your remote machine:
    <code>[&lt;UUN&gt;@login03(eddie) session1]$ scp &lt;localname&gt;@&lt;localIP&gt;:/location/directory/file
        /destination/directory/.</code></p>

<p>Let&rsquo;s transfer files <code>hello.sh</code> and <code>myjob.sh</code> from the virtual machine onto eddie.
    These files are located within the <code>session1/eddie-hpc-data</code> on the virtual machine and we need to move
    them to the <code>session1</code> folder we have just created on Eddie. Since both files finish in <code>.sh</code>,
    instead of typing each in we can use a <code>*</code> wildcard.</p>

<div><pre><code class="language-bash">$ cd eddie-hpc-data
$ scp *.sh nelle@eddie.ecdf.ed.ac.uk:/exports/eddie/scratch/nelle/session1</code></pre>
</div>

<p>You will be prompted for the password, then you will see the report on the file transfer:
    <code>
        hello.sh 100% 271 44.3KB/s 00:00
        myjob.sh 100% 316 62.2KB/s 00:00
    </code></p>

<p>If we now check the files from Eddie.</p>

<div><pre><code class="language-bash">[nelle@login03(eddie) session1]$ pwd
/exports/eddie/scratch/nelle/session1
[nelle@login03(eddie) session1]$ ls -lrth
total 1.0K
-rw-r--r-- 1 nelle eddie_users 271 Jan 17 11:42 hello.sh
-rw-r--r-- 1 nelle eddie_users 316 Jan 17 11:42 myjob.sh
</code></pre>
</div>

<p>Command <code>ls -lrth</code> lists the contents of the directory in an expanded format <code>-l</code>, ordering
    them by time, <code>-t</code>, in a reverse, <code>-r</code>, order with the newest files at the bottom, and shows
    the showing the file sizes in human-readable format, <code>-h</code>. Explore further options of listing files with
    <code>ls --help</code>.</p>

<h4 id="toc_5">Question</h4>

<p>If you wanted to transfer the whole directory <code>eddie-hpc-data</code>, what would you type?</p>

<p>
<details>
    <summary><strong>Answer:</strong></summary>
    </p>

    <p>To copy a whole directory, we add the <code>-r</code> flag, for “recursive”</p>

    <div>
        <pre><code class="language-none">$ scp -r eddie-hpc-data nelle@eddie.ecdf.ed.ac.uk:/exports/eddie/scratch/nelle/session1</code></pre>
    </div>

    <p></details>
</p>

<h3 id="toc_6">5. Using the resources</h3>

<p>The HPC is composed of <em>nodes</em>, which are individual computers, and they come in different types. </p>

<p>The node we are logged into is the <em>head node</em>, which you see in your prompt as <code>login03</code>. This
    node is made for login, file transfer and manipulation, but it is <u>not for calculations</u>. </p>

<p>The calculations are done on the <em>compute nodes</em>. There are different types of these nodes available, to cater
    for various needs. </p>

<p>To run a job, you will need to submit a Grid Engine job submission script, that contains details of the program to
    run as well as requests for resources (compute nodes, memory, time, etc). </p>

<p>You have just copied over an example job script, <code>myjob.sh</code>. Let&rsquo;s examine it (open it with your
    favourite command, such as <code>more myjob.sh</code>:</p>

<div><pre><code class="language-none">#!/bin/sh
# Grid Engine options (lines prefixed with #$)
#  job name: -N
#$ -N hello  
#  use the current working directory: -cwd            
#$ -cwd 
#  runtime limit of 5 minutes: -l h_rt                 
#$ -l h_rt=00:05:00 
#  memory limit of 1 Gbyte: -l h_vmem
#$ -l h_vmem=1G


# Run the program
bash hello.sh </code></pre>
</div>

<p>This script tells Eddie to run a job named <code>hello</code> from the current working directory, requesting a
    maximum of 5 minutes run time and a maximum memory of 1 GB.
    The job itself is a bash script named <code>hello.sh</code>.</p>

<p>We can now submit <code>myjob.sh</code> using the scheduler command <code>qsub</code>. </p>

<div><pre><code class="language-bash">[nelle@login03(eddie) session1]$ qsub myjob.sh 
Your job 38945036 (&quot;hello&quot;) has been submitted</code></pre>
</div>

<p>The scheduler assigns this job an ID and reports that the job has been submitted. The scheduler will queue the job,
    while waiting for the resources to become available.</p>

<p>We can monitor the progress of our job with the command <code>qstat</code>:</p>

<div><pre><code class="language-bash">[nelle@login03(eddie) session1]$ qstat -u nelle
job-ID     prior   name       user         state submit/start at     queue                          jclass                         slots ja-task-ID 
------------------------------------------------------------------------------------------------------------------------------------------------
  38945036 0.00000 hello      nelle     qw    01/17/2024 12:13:09                                                                   1        </code></pre>
</div>

<p>This tells us that the job is currently queuing <code>qw</code> for resources; since we are not asking for much, it
    should not take long for it to run, and then the state will show as <code>r</code>. Nevertheless, the job is very
    small and will take an instance to run, so we may even miss it.</p>

<p>If you have made a mistake and want to cancel the job, you can do it with the command <code>qdel JobId</code>, where
    <code>JobID</code> is the number that was assigned to your job by the scheduler, here <code>38945036</code>.</p>

<p>Unlike on a personal machine, running jobs do not print onto your screen (imagine the mess it would make if you were
    running many jobs at the same time). Instead, the two extra files are written:</p>

<ul>
    <li><code>&lt;name&gt;.o&lt;JobID&gt;</code> that contains the output you would normally receive on the screen;</li>
    <li><code>&lt;name&gt;.e&lt;JobID&gt;</code> that contains any errors or HPC-related info.</li>
</ul>

<p>Let&rsquo;s examine the files you got:</p>

<div><pre><code class="language-bash">[nelle@login03(eddie) session1]$ ls -lrth
total 1.5K
-rw-r--r-- 1 nelle eddie_users 271 Jan 17 11:42 hello.sh
-rw-r--r-- 1 nelle eddie_users 316 Jan 17 11:42 myjob.sh
-rw-r--r-- 1 nelle eddie_users   0 Jan 17 12:13 hello.e38945036
-rw-r--r-- 1 nelle eddie_users 104 Jan 17 12:13 hello.o38945036</code></pre>
</div>

<p>And now read the <code>hello.o38945036</code>:</p>

<div><pre><code class="language-bash">[nelle@login03(eddie) session1]$ more hello.o38945036 
Hello World!
I am: nelle
It is now: Wed 17 Jan 12:13:25 GMT 2024
I am using: node2c01.ecdf.ed.ac.uk
</code></pre>
</div>

<p>This is the output of our <code>hello.sh</code> script - feel free to modify it to your liking.</p>

<h3 id="toc_7">7. Logging out</h3>

<p>Not every job will run over a few minutes, but using an HPC with a job scheduler means that you do not need ot remain
    logged in for the job to be running. HPC will continue to do its job while you are sleeping, away or on holiday.</p>

<p>To log out from Eddie just type <code>exit</code></p>

<div>
    <pre><code class="language-bash">[nelle@login03(eddie) session1]$ exit</code></pre>
</div>

<blockquote>
    <h3 id="toc_8">KEY POINTS PART 7</h3>

    <ul>
        <li>Connect to a remote HPC: <code>ssh yourUsername@remote.computer.address</code></li>
        <li>Copy files between two machines with <code>scp</code></li>
        <li>HPCs have log-in nodes and compute-nodes</li>
        <li>Schedulers optimise the use of resources and manage job submission, queuing and running.</li>
        <li>To submit a job one needs a script <code>qsub myjob.sh</code></li>
        <li><code>qstat</code> allows to check on the status of the submitted jobs</li>
    </ul>
</blockquote>

<hr>

<h2 id="toc_9">Feedback</h2>

<p>We would like to aks you for a favour to give us regular feedback on this course and the session. This is the first
    time we are running the course and your feedback will help us improve it. </p>

<p>Please fill in this <a href="https://forms.office.com/e/AQH06hukpu?origin=lprLink">feedback form by clicking the
    link</a> or use your phone to scan the code:</p>

<p><img alt="fb" src="./img/FB1.png" width="200"/></p>

<h2 id="toc_10">Thank You!</h2>

<p>👆<a href="Session1.html">Go to the main menu</a> <br>
    👈<a href="Intro2BASH_S6.html">Go to the previous part &ndash; Pipes and Filters</a><br></p>

<!-- to be moved to the next session

### 7. Using modules 

Eddie HPC provides a number of [applications](https://www.wiki.ed.ac.uk/display/ResearchServices/Applications) = software to cater for various types of calculations that may be performed. 

Unlike on our personal machine, where all of the applications are always available to us, here the seer number of applications will make it very demanding to load up in one go for every user. Therefore, users will need to load the modules they need:

You can see what modules are available with the command:
```module available```
and you can make them available, by loading them::
```module load <MODULENAME/MODULEVERSION>```
For a list of currently loaded modules, run:
```module list```

-->

<!-- for another session

### Moving data to datastore?

Stagging  - i.e. data transfer to datastore?

-->


<script type="text/javascript">
    var _self = "undefined" != typeof window ? window : "undefined" != typeof WorkerGlobalScope && self instanceof WorkerGlobalScope ? self : {},
        Prism = function () {
            var e = /\blang(?:uage)?-(\w+)\b/i, t = 0, n = _self.Prism = {
                util: {
                    encode: function (e) {
                        return e instanceof a ? new a(e.type, n.util.encode(e.content), e.alias) : "Array" === n.util.type(e) ? e.map(n.util.encode) : e.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/\u00a0/g, " ")
                    }, type: function (e) {
                        return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]
                    }, objId: function (e) {
                        return e.__id || Object.defineProperty(e, "__id", {value: ++t}), e.__id
                    }, clone: function (e) {
                        var t = n.util.type(e);
                        switch (t) {
                            case"Object":
                                var a = {};
                                for (var r in e) e.hasOwnProperty(r) && (a[r] = n.util.clone(e[r]));
                                return a;
                            case"Array":
                                return e.map && e.map(function (e) {
                                    return n.util.clone(e)
                                })
                        }
                        return e
                    }
                }, languages: {
                    extend: function (e, t) {
                        var a = n.util.clone(n.languages[e]);
                        for (var r in t) a[r] = t[r];
                        return a
                    }, insertBefore: function (e, t, a, r) {
                        r = r || n.languages;
                        var l = r[e];
                        if (2 == arguments.length) {
                            a = arguments[1];
                            for (var i in a) a.hasOwnProperty(i) && (l[i] = a[i]);
                            return l
                        }
                        var o = {};
                        for (var s in l) if (l.hasOwnProperty(s)) {
                            if (s == t) for (var i in a) a.hasOwnProperty(i) && (o[i] = a[i]);
                            o[s] = l[s]
                        }
                        return n.languages.DFS(n.languages, function (t, n) {
                            n === r[e] && t != e && (this[t] = o)
                        }), r[e] = o
                    }, DFS: function (e, t, a, r) {
                        r = r || {};
                        for (var l in e) e.hasOwnProperty(l) && (t.call(e, l, e[l], a || l), "Object" !== n.util.type(e[l]) || r[n.util.objId(e[l])] ? "Array" !== n.util.type(e[l]) || r[n.util.objId(e[l])] || (r[n.util.objId(e[l])] = !0, n.languages.DFS(e[l], t, l, r)) : (r[n.util.objId(e[l])] = !0, n.languages.DFS(e[l], t, null, r)))
                    }
                }, plugins: {}, highlightAll: function (e, t) {
                    var a = {
                        callback: t,
                        selector: 'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'
                    };
                    n.hooks.run("before-highlightall", a);
                    for (var r, l = a.elements || document.querySelectorAll(a.selector), i = 0; r = l[i++];) n.highlightElement(r, e === !0, a.callback)
                }, highlightElement: function (t, a, r) {
                    for (var l, i, o = t; o && !e.test(o.className);) o = o.parentNode;
                    o && (l = (o.className.match(e) || [, ""])[1], i = n.languages[l]), t.className = t.className.replace(e, "").replace(/\s+/g, " ") + " language-" + l, o = t.parentNode, /pre/i.test(o.nodeName) && (o.className = o.className.replace(e, "").replace(/\s+/g, " ") + " language-" + l);
                    var s = t.textContent, u = {element: t, language: l, grammar: i, code: s};
                    if (!s || !i) return n.hooks.run("complete", u), void 0;
                    if (n.hooks.run("before-highlight", u), a && _self.Worker) {
                        var c = new Worker(n.filename);
                        c.onmessage = function (e) {
                            u.highlightedCode = e.data, n.hooks.run("before-insert", u), u.element.innerHTML = u.highlightedCode, r && r.call(u.element), n.hooks.run("after-highlight", u), n.hooks.run("complete", u)
                        }, c.postMessage(JSON.stringify({language: u.language, code: u.code, immediateClose: !0}))
                    } else u.highlightedCode = n.highlight(u.code, u.grammar, u.language), n.hooks.run("before-insert", u), u.element.innerHTML = u.highlightedCode, r && r.call(t), n.hooks.run("after-highlight", u), n.hooks.run("complete", u)
                }, highlight: function (e, t, r) {
                    var l = n.tokenize(e, t);
                    return a.stringify(n.util.encode(l), r)
                }, tokenize: function (e, t) {
                    var a = n.Token, r = [e], l = t.rest;
                    if (l) {
                        for (var i in l) t[i] = l[i];
                        delete t.rest
                    }
                    e:for (var i in t) if (t.hasOwnProperty(i) && t[i]) {
                        var o = t[i];
                        o = "Array" === n.util.type(o) ? o : [o];
                        for (var s = 0; s < o.length; ++s) {
                            var u = o[s], c = u.inside, g = !!u.lookbehind, h = !!u.greedy, f = 0, d = u.alias;
                            u = u.pattern || u;
                            for (var p = 0; p < r.length; p++) {
                                var m = r[p];
                                if (r.length > e.length) break e;
                                if (!(m instanceof a)) {
                                    u.lastIndex = 0;
                                    var y = u.exec(m), v = 1;
                                    if (!y && h && p != r.length - 1) {
                                        var b = r[p + 1].matchedStr || r[p + 1], k = m + b;
                                        if (p < r.length - 2 && (k += r[p + 2].matchedStr || r[p + 2]), u.lastIndex = 0, y = u.exec(k), !y) continue;
                                        var w = y.index + (g ? y[1].length : 0);
                                        if (w >= m.length) continue;
                                        var _ = y.index + y[0].length, P = m.length + b.length;
                                        if (v = 3, P >= _) {
                                            if (r[p + 1].greedy) continue;
                                            v = 2, k = k.slice(0, P)
                                        }
                                        m = k
                                    }
                                    if (y) {
                                        g && (f = y[1].length);
                                        var w = y.index + f, y = y[0].slice(f), _ = w + y.length, S = m.slice(0, w),
                                            O = m.slice(_), j = [p, v];
                                        S && j.push(S);
                                        var A = new a(i, c ? n.tokenize(y, c) : y, d, y, h);
                                        j.push(A), O && j.push(O), Array.prototype.splice.apply(r, j)
                                    }
                                }
                            }
                        }
                    }
                    return r
                }, hooks: {
                    all: {}, add: function (e, t) {
                        var a = n.hooks.all;
                        a[e] = a[e] || [], a[e].push(t)
                    }, run: function (e, t) {
                        var a = n.hooks.all[e];
                        if (a && a.length) for (var r, l = 0; r = a[l++];) r(t)
                    }
                }
            }, a = n.Token = function (e, t, n, a, r) {
                this.type = e, this.content = t, this.alias = n, this.matchedStr = a || null, this.greedy = !!r
            };
            if (a.stringify = function (e, t, r) {
                if ("string" == typeof e) return e;
                if ("Array" === n.util.type(e)) return e.map(function (n) {
                    return a.stringify(n, t, e)
                }).join("");
                var l = {
                    type: e.type,
                    content: a.stringify(e.content, t, r),
                    tag: "span",
                    classes: ["token", e.type],
                    attributes: {},
                    language: t,
                    parent: r
                };
                if ("comment" == l.type && (l.attributes.spellcheck = "true"), e.alias) {
                    var i = "Array" === n.util.type(e.alias) ? e.alias : [e.alias];
                    Array.prototype.push.apply(l.classes, i)
                }
                n.hooks.run("wrap", l);
                var o = "";
                for (var s in l.attributes) o += (o ? " " : "") + s + '="' + (l.attributes[s] || "") + '"';
                return "<" + l.tag + ' class="' + l.classes.join(" ") + '" ' + o + ">" + l.content + "</" + l.tag + ">"
            }, !_self.document) return _self.addEventListener ? (_self.addEventListener("message", function (e) {
                var t = JSON.parse(e.data), a = t.language, r = t.code, l = t.immediateClose;
                _self.postMessage(n.highlight(r, n.languages[a], a)), l && _self.close()
            }, !1), _self.Prism) : _self.Prism;
            var r = document.currentScript || [].slice.call(document.getElementsByTagName("script")).pop();
            return r && (n.filename = r.src, document.addEventListener && !r.hasAttribute("data-manual") && document.addEventListener("DOMContentLoaded", n.highlightAll)), _self.Prism
        }();
    "undefined" != typeof module && module.exports && (module.exports = Prism), "undefined" != typeof global && (global.Prism = Prism);
</script>

<script type="text/javascript">
    !function (e) {
        var t = {
            variable: [{
                pattern: /\$?\(\([\w\W]+?\)\)/,
                inside: {
                    variable: [{pattern: /(^\$\(\([\w\W]+)\)\)/, lookbehind: !0}, /^\$\(\(/],
                    number: /\b-?(?:0x[\dA-Fa-f]+|\d*\.?\d+(?:[Ee]-?\d+)?)\b/,
                    operator: /--?|-=|\+\+?|\+=|!=?|~|\*\*?|\*=|\/=?|%=?|<<=?|>>=?|<=?|>=?|==?|&&?|&=|\^=?|\|\|?|\|=|\?|:/,
                    punctuation: /\(\(?|\)\)?|,|;/
                }
            }, {
                pattern: /\$\([^)]+\)|`[^`]+`/,
                inside: {variable: /^\$\(|^`|\)$|`$/}
            }, /\$(?:[a-z0-9_#\?\*!@]+|\{[^}]+\})/i]
        };
        e.languages.bash = {
            shebang: {pattern: /^#!\s*\/bin\/bash|^#!\s*\/bin\/sh/, alias: "important"},
            comment: {pattern: /(^|[^"{\\])#.*/, lookbehind: !0},
            string: [{
                pattern: /((?:^|[^<])<<\s*)(?:"|')?(\w+?)(?:"|')?\s*\r?\n(?:[\s\S])*?\r?\n\2/g,
                lookbehind: !0,
                inside: t
            }, {pattern: /(["'])(?:\\\\|\\?[^\\])*?\1/g, inside: t}],
            variable: t.variable,
            "function": {
                pattern: /(^|\s|;|\||&)(?:alias|apropos|apt-get|aptitude|aspell|awk|basename|bash|bc|bg|builtin|bzip2|cal|cat|cd|cfdisk|chgrp|chmod|chown|chroot|chkconfig|cksum|clear|cmp|comm|command|cp|cron|crontab|csplit|cut|date|dc|dd|ddrescue|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|du|egrep|eject|enable|env|ethtool|eval|exec|expand|expect|export|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|getopts|git|grep|groupadd|groupdel|groupmod|groups|gzip|hash|head|help|hg|history|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|jobs|join|kill|killall|less|link|ln|locate|logname|logout|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|make|man|mkdir|mkfifo|mkisofs|mknod|more|most|mount|mtools|mtr|mv|mmv|nano|netstat|nice|nl|nohup|notify-send|nslookup|open|op|passwd|paste|pathchk|ping|pkill|popd|pr|printcap|printenv|printf|ps|pushd|pv|pwd|quota|quotacheck|quotactl|ram|rar|rcp|read|readarray|readonly|reboot|rename|renice|remsync|rev|rm|rmdir|rsync|screen|scp|sdiff|sed|seq|service|sftp|shift|shopt|shutdown|sleep|slocate|sort|source|split|ssh|stat|strace|su|sudo|sum|suspend|sync|tail|tar|tee|test|time|timeout|times|touch|top|traceroute|trap|tr|tsort|tty|type|ulimit|umask|umount|unalias|uname|unexpand|uniq|units|unrar|unshar|uptime|useradd|userdel|usermod|users|uuencode|uudecode|v|vdir|vi|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yes|zip)(?=$|\s|;|\||&)/,
                lookbehind: !0
            },
            keyword: {
                pattern: /(^|\s|;|\||&)(?:let|:|\.|if|then|else|elif|fi|for|break|continue|while|in|case|function|select|do|done|until|echo|exit|return|set|declare)(?=$|\s|;|\||&)/,
                lookbehind: !0
            },
            "boolean": {pattern: /(^|\s|;|\||&)(?:true|false)(?=$|\s|;|\||&)/, lookbehind: !0},
            operator: /&&?|\|\|?|==?|!=?|<<<?|>>|<=?|>=?|=~/,
            punctuation: /\$?\(\(?|\)\)?|\.\.|[{}[\];]/
        };
        var a = t.variable[1].inside;
        a["function"] = e.languages.bash["function"], a.keyword = e.languages.bash.keyword, a.boolean = e.languages.bash.boolean, a.operator = e.languages.bash.operator, a.punctuation = e.languages.bash.punctuation
    }(Prism);
</script>

<script type="text/x-mathjax-config">
    (function () {

    MathJax.Hub.Config({
        'showProcessingMessages': false,
        'messageStyle': 'none'
    });

    if (typeof MathJaxListener !== 'undefined') {
        MathJax.Hub.Register.StartupHook('End', function () {
            MathJaxListener.invokeCallbackForKey_('End');
        });
    }

    })();
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
        type="text/javascript"></script>


</body>

</html>
